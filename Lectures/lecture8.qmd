---
title: '<h1 style="font-size:2.8em; "> Two-way tables and chi-square <br> & Scatterplots and correlation </h1>'
title-slide-attributes:
  data-background-image: ../images/abstract_statistics_playful2.jpeg
  data-background-size: cover
  data-background-opacity: "0.33"
subtitle: "SOC 221 • Lecture 8"
author: "Victoria Sass"
date: "July 22, 2024"
date-format: full
execute: 
  echo: true
  message: false
  warning: false
format: 
  revealjs:
    reference-location: margin
    theme: lecture_styles.scss
    controls: true
    slide-number: true
    chalkboard: true
    incremental: false 
    smaller: true
    preview-links: true
    history: false
    progress: true
    link-external-icon: true 
---

```{r}
#| echo: false
#| cache: false
require(tidyverse)
require(ggthemes)
require(gt)
require(gganimate)
require(ggforce)

knitr::opts_chunk$set(comment = ">")

# set transparent background in base
knitr::opts_chunk$set(dev.args=list(bg='transparent'))

# set transparent background in ggplot
ggplot2::theme_set(ggthemes::theme_tufte(base_size=12))
ggplot2::theme_update(panel.background = ggplot2::element_blank(),
                      plot.background=ggplot2::element_blank(),
    legend.background=ggplot2::element_blank())

options(width=80, show.signif.stars=FALSE)
```

# Two-way tables<br>and chi-square {.section-title background-color="#c5b4e3"}

# Bivariate tables<br>and chi-square {.section-title background-color="#c5b4e3"}

## Overview

::: incremental
* Have used one sample to draw inferences about one population


* Have drawn inferences about the difference between two populations
    * Beginning of efforts to test statistical significance of [associations]{.underline} between variables
        * Example: testing for gender differences in emotional intelligence (EI) = testing for an *association* between gender and EI


* [New goal: test statistical significance for [associations]{.underline} in two-way tables]{style="color: #e93cac"}
    * Two-way tables: tables that simultaneously cross-classify values of one variable by values of another
        * Also called bivariate tables, contingency tables, or crosstabs
    * Useful for assessing the [bivariate]{.underline} associations between [categorical]{.underline} variables
:::

---

:::: {.columns}

::: {.column width="50%"}

\

::: {style="font-size: 1.75em"}
> [Association]{style="color: #e93cac"}<br>Two variables are “associated” with each other when variation in one variable corresponds with variation in the other variable.
:::

::: {.fragment}
::: {style="font-size: 1.5em"}
> Synonym: *relationship*
:::
:::
:::
  
::: {.column width="50%"}

\

::: {.fragment}
#### [If the variables X and Y are associated:]{.underline}

* particular values of Y tend to coincide with particular values of X
* the values of Y are different across different values of X
* the average value of Y depends on the value of X

:::

::: {.fragment}
#### [Examples:]{.underline}

* Education and income are associated because people with higher levels of education tend to have higher levels of income.
* Political attitudes are associated with age in that older people tend to be more politically conservative than younger people.
:::

:::
  
::::

---

:::: {.columns}

::: {.column width="50%"}
::: {style="font-size: 1.5em"}
> [Independent Variable]{style="color: #e93cac"}<br>An independent variable is assumed to influence a dependent variable. The assumed “*cause*” in an association
:::

\

::: {.fragment}
#### Examples:

* [If we assume that education affects income, education is the independent variable and income is the dependent variable.]{style="font-size: 0.8em"}
* [If we believe that political attitudes change with age, then age is independent variable and political attitudes represent the dependent variable.]{style="font-size: 0.8em"}
:::



:::
  
::: {.column width="50%"}
::: {style="font-size: 1.5em"}
> [Dependent Variable]{style="color: #e93cac"}<br>A dependent variable is affected by one or more other variables. The assumed “*effect*” in an association
:::

\
\

::: {.fragment style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center"}
Generally avoid using language of “*cause*” and “*effect*” since establishing a case for causality is always difficult and rarely certain.
:::

:::
  
::::

# Associations in <br> bivariate tables

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

Say you were presented with the following two tables. Can you tell whether there is an association between race and support for the death penalty?

:::: {.columns}

::: {.column width="60%"}

```{r}
#| echo: false

death_penalty <- data.frame(f = c(719, 178, 897), Percent = c(80.16, 19.84, 100.00))
rownames(death_penalty) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Frequency distribution of attitudes towards the death penalty", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = ) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3", table.font.size = px(18L)) |> # change background color
  opt_stylize(style = 6, color = "pink", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") # outline table with colored border


  # |>  
  #tab_style(style = list(cell_borders(sides = "all", color = "red")), locations = list(cells_body(), cells_column_labels(), cells_stub(), cells_stubhead(), cells_title(groups = c('title', 'subtitle')))) 
```


:::
  
::: {.column width="40%"}
```{r}
#| echo: false

race <- data.frame(f = c(104, 793, 897), Percent = c(11.59, 88.41, 100.00))
rownames(race) <- c("Black", "White", "TOTAL")

race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Frequency distribution of race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3", table.font.size = px(18L)) |> # change background color
  opt_stylize(style = 6, color = "cyan", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") # outline table with colored border

```
:::
  
::::

<br>

::: {.fragment fragment-index=1}
#### [Two-way (contingency/bivariate) tables]{.underline}

* Purpose: 
    * Simultaneously cross-classify the distribution of two variables
    * Common first step in detecting and summarizing an association between variables

:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60", "44",  "104"), White = c("659", "134", "793"), TOTAL = c("719", "178", "**897**"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body()))
```

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [**Title**: Values of the *DV* [by]{.underline} Values of the *IV*]{style="background: #c5b4e3; border: 4px solid #754cbc; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center;"}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body())) |> 
  tab_style(style = cell_fill(color = "#c5b4e3"), locations = cells_title())
```

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [**Column variable** (usually the *independent* variable)]{style="background: #ffc700; border: 4px solid #a68100; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center;"}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body())) |> 
  tab_style(style = cell_fill(color = "#ffc700"), locations = cells_column_labels(columns = c(Black, White)))
```

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [**Row variable** (usually the *dependent* variable)]{style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center;"}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body())) |> 
  tab_style(style = cell_fill(color = "#2ad2c9"), locations = cells_stub(rows = c("Support Death Penalty", "Oppose Death Penalty")))
```

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body())) |> 
  tab_style(style = cell_fill(color = "#aadb1e"), locations = cells_body(rows = c("Support Death Penalty", "Oppose Death Penalty"), columns = c(Black, White)))
```


#### [**Observed frequencies** (Each [cell]{.underline} of the table includes the [count]{.underline} of cases with the specific combination of attributes on the two variables)]{style="background: #aadb1e; border: 4px solid #6e8e13; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; top: 50px; left: 0px"}

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L), data_row.padding = px(24.5)) |> 
  tab_style(style = list(cell_text(v_align = "top")), locations = list(cells_body())) |> 
  tab_style(style = cell_fill(color = "#e93cac"), locations = cells_body(columns = "TOTAL")) |> 
  tab_style(style = cell_fill(color = "#e93cac"), locations = cells_body(rows = "TOTAL"))
```


#### [**Marginals** show the basic distribution of the two variables<br>(same information from frequency tables)]{style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; top: 50px; left: 0px"}

#### ["*Total*" row and column are called *marginals*]{style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; bottom: 25px; right: 0px"}

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60 <br> (57.69%)", "44 <br> (42.31%)",  "104 <br> (100.00%)"), White = c("659 <br> (83.10%)", "134 <br> (16.90%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "**897**"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```


#### [**Percentages** can be used to compare the distribution of the [dependent variable]{.underline} (DV) across values of the [independent variable]{.underline} (IV)]{style="border: 4px solid #4b2e83; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; top: 50px; left: 0px"}

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60 <br> (**57.69%**)", "44 <br> (42.31%)",  "104 <br> (100.00%)"), White = c("659 <br> (83.10%)", "134 <br> (16.90%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "**897**"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) |> 
  tab_style(style = cell_fill(color = "#c5b4e3"), locations = cells_body(rows = c("Support Death Penalty", "TOTAL"), columns = Black))
```


#### [**Percentages** can be used to compare the distribution of the [dependent variable]{.underline} (DV) across values of the [independent variable]{.underline} (IV)]{style="border: 4px solid #4b2e83; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; top: 50px; left: 0px"}

::: {style="background: #c5b4e3; border: 4px solid #754cbc; border-radius: 15px; width: 400px; height: 50px; padding: 5px 5px 5px 5px; position: absolute; top: 404px; right: 110px; text-align: center; font-size: 1.25em"}
**57.69%** = (60/104) * (100)
:::

#### [Calculate percentages of the DV within values of IV (here use column %s)]{style="background: #c5b4e3; border: 4px solid #754cbc; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; bottom: 25px; right: 0px"}

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Placeholder]{style="color: #e8e3d3"}

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60 <br> (**57.69%**)", "44 <br> (42.31%)",  "104 <br> (100.00%)"), White = c("659 <br> (83.10%)", "134 <br> (16.90%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "**897**"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

#### [**Percentages** can be used to compare the distribution of the [dependent variable]{.underline} (DV) across values of the [independent variable]{.underline} (IV)]{style="border: 4px solid #4b2e83; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; top: 50px; left: 0px"}

#### [Percentages of the DV within values of the IV =<br>**Conditional Distributions**]{style="background: #c5b4e3; border: 4px solid #754cbc; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; bottom: 25px; right: -75px;"}

::: {.fragment style="background: #ffc700; border: 4px solid #a68100; border-radius: 15px; padding: 10px 10px 10px 10px; text-align: center; position: absolute; bottom: 100px; left: -75px; width: 600px; font-size: 1.25em"}
Can detect the [**ASSOCIATION**]{style="color: #e93cac"} between variables by comparing conditional distributions...
:::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}


:::: {.columns}

::: {.column width="50%"}

::: {.fragment style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?
:::


:::
  
::: {.column width="50%"}

::: {.fragment style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center"}
[**DIRECTION**]{.underline style="color: #690c48"} <br>
Is the association positive or negative?
:::

<br>

::: {.fragment style="background: #aadb1e; border: 4px solid #6e8e13; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center"}
[**STATISTICAL SIGNIFICANCE**]{.underline style="color: #44580c"} <br>
How certain can we be that the association exists in the population?
:::

:::
  
::::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}

:::: {.columns}

::: {.column width="50%"}

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?

* **Maximum (perfect) association:**
    * All cases with a particular value of X have the same value on Y (no conditional variation)
    * Knowing the value of X allows for perfect prediction of Y
* **Minimum (no) association:**
    * High conditional variation (value of Y varies even among those cases with the same value of X)
    * Knowing the value of X does not improve ability to predict Y

:::


:::
  
::: {.column width="50%"}

:::
  
::::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}

:::: {.columns}

::: {.column width="50%"}

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?

* [**Maximum (perfect) association:**]{style="color: #a68100"}
    * [All cases with a particular value of X have the same value on Y (no conditional variation)]{style="color: #a68100"}
    * [Knowing the value of X allows for perfect prediction of Y]{style="color: #a68100"}
* **Minimum (no) association:**
    * High conditional variation (value of Y varies even among those cases with the same value of X)
    * Knowing the value of X does not improve ability to predict Y

:::


:::
  
::: {.column width="50%"}

::: {.fragment fragment-index=3 style="text-align: center; border: 3px solid black; font-size: 0.85em"}
**Conditional distributions are completely dissimilar** (maximum difference in column %s across values of the IV)
:::

::: {.fragment fragment-index=1}
```{r}
#| echo: false

aca <- data.frame(Democrat = c("60 <br> (100.00%)", "0 <br> (0.00%)",  "60 <br> (100.00%)"), Republican = c("0 <br> (0.00%)", "39 <br> (100.00%)", "39 <br> (100.00%)"), TOTAL = c("60 <br> (60.61%)", "39 <br> (39.39%)", "99"))
rownames(aca) <- c("Voted for ACA", "Voted against ACA", "TOTAL")

aca |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of vote on Affordable Care Act (ACA) by political party", subtitle = "US Senators in 2009") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```
:::

::: {.fragment fragment-index=4 style="text-align: center; border: 3px solid black; font-size: 0.85em"}
**No conditional variation** (all cases with a particular IV value have the same DV value)
:::

:::
  
::::

::: {.fragment fragment-index=2 style="border: 3px solid #a68100; width: 100px; height: 35px; margin: 10px; position: absolute; top: 380px; right: 132px"}

:::

::: {.fragment fragment-index=2 style="border: 3px solid #a68100; width: 120px; height: 35px; margin: 10px; position: absolute; top: 380px; right: 247px"}

:::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}

:::: {.columns}

::: {.column width="50%"}

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?

* **Maximum (perfect) association:**
    * All cases with a particular value of X have the same value on Y (no conditional variation)
    * Knowing the value of X allows for perfect prediction of Y
* [**Minimum (no) association:**]{style="color: #a68100"}
    * [High conditional variation (value of Y varies even among those cases with the same value of X)]{style="color: #a68100"}
    * [Knowing the value of X does not improve ability to predict Y]{style="color: #a68100"}

:::


:::
  
::: {.column width="50%"}

::: {.fragment fragment-index=3 style="text-align: center; border: 3px solid black; font-size: 0.85em"}
**Conditional distributions are exactly the same** (no difference in column %s across values of the IV; all match the marginal %s)
:::

::: {.fragment fragment-index=1}
```{r}
#| echo: false

transportation_gender <- data.frame(Female = c("100 <br> (71.43%)", "30 <br> (21.43%)",  "10 <br> (7.14%)", "140 <br> (100.00%)"), Male = c("150 <br> (71.43%)", "45 <br> (21.43%)", "15 <br> (7.14%)", "210 <br> (100.00%)"), TOTAL = c("250 <br> (71.43%)", "75 <br> (21.43%)", "25 <br> (7.14%)", "350 <br> (100.00%)"))
rownames(transportation_gender) <- c("Drive", "Public Transportation", "Walk/bike", "TOTAL")

transportation_gender |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of transportation to work by gender", subtitle = "Alltech Corp. workers 2014") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(21L)) 
```
:::

::: {.fragment fragment-index=4 style="text-align: center; border: 3px solid black; font-size: 0.85em"}
**High conditional variation** (lots of different values of DV for cases with same IV value)
:::

:::
  
::::

::: {.fragment fragment-index=2 style="border: 3px solid #a68100; width: 350px; height: 30px; margin: 10px; position: absolute; top: 355px; right: -5px"}

:::

::: {.fragment fragment-index=2 style="border: 3px solid #a68100; width: 350px; height: 30px; margin: 10px; position: absolute; top: 425px; right: -5px"}

:::

::: {.fragment fragment-index=2 style="border: 3px solid #a68100; width: 350px; height: 30px; margin: 10px; position: absolute; top: 500px; right: -5px"}

:::

---

### Using conditional distributions to detect an [association]{style="color: #e93cac"}

:::: {.columns}

::: {.column width="80%"}

<br>

::: {.fragment fragment-index=1}
```{r}
#| echo: false

crimes_educ <- data.frame(low = c("80 <br> (50.00%)", "24 <br> (15.00%)",  "56 <br> (35.00%)", "160 <br> (100.00%)"), high = c("130 <br> (86.67%)", "15 <br> (10.00%)", "5 <br> (3.33%)", "150 <br> (100.00%)"), TOTAL = c("210 <br> (67.74%)", "39 <br> (12.58%)", "61 <br> (19.68%)", "310 <br> (100.00%)"))
rownames(crimes_educ) <- c("0 Crimes", "1 Crime", "2+ Crimes", "TOTAL")

crimes_educ |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table: Number of Crimes Committed by Education", subtitle = "Sample of parolees from Florida Prisons") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_label( low = "Low Education", high = "High Education") |> 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```
:::
:::
  
::: {.column width="20%"}
  
::: {.fragment fragment-index=4 style="font-size:1.25em; background: #e93cac; border: 4px solid #690c48; border-radius: 15px; width: 250px; padding: 5px 5px 5px 5px; position: absolute; top: 275px; right: -75px; text-align: center"}
**YES**: Conditional distributions are [*different*]{.underline}
:::
  
:::
  
:::: 

<br>

::: {.fragment fragment-index=2 style="font-size:1.25em; text-align: center"}
#### Is there any association?
:::




::: {.fragment fragment-index=3 style="border: 3px solid #e93cac; width: 400px; height: 30px; margin: 10px; position: absolute; top: 290px; left: 200px"}

:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

#### [Is there an association between race and support for the death penalty? How do you know?]{.underline .fragment fragment-index=1}

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60 <br> (57.69%)", "44 <br> (42.31%)",  "104 <br> (100.00%)"), White = c("659 <br> (83.10%)", "134 <br> (16.90%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "897"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {.fragment fragment-index=2 style="border: 3px solid #1b8883; width: 400px; height: 30px; margin: 10px; position: absolute; top: 347px; left: 310px"}

:::

::: {.fragment fragment-index=4 style="border: 3px solid #6e8e13; width: 150px; height: 30px; margin: 10px; position: absolute; top: 347px; right: 50px"}

:::

* [Conditional distributions are different from each other]{.fragment fragment-index=3 style="color: #1b8883"} [and the marginal percentages]{.fragment fragment-index=4 style="color: #6e8e13"}\
* [If attitudes were completely unassociated with race, we'd expect $80.16\%$ of both races to support the death penalty]{.fragment fragment-index=5}

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

:::{style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; font-size: 1.5em; position: absolute; top: 35px; left: 0px"}
How **STRONG** is the association?
:::

<br>

<br>

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("60 <br> (57.69%)", "44 <br> (42.31%)",  "104 <br> (100.00%)"), White = c("659 <br> (83.10%)", "134 <br> (16.90%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "897"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: incremental
* Somewhere between the extremes of no association and a perfect association
    * We can quantify the strength of the association using **risk ratios**
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

<br>

:::{style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; font-size: 1.5em; position: absolute; top: 35px; left: 0px"}
How **STRONG** is the association?
:::

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="font-size: 1.05em; position: absolute; bottom: -36px"}
> [RISK RATIO (a.k.a. relative risk)]{style="color: #e93cac;"}<br>
The ratio of the probability of some outcome among one group to the probability of the outcome among a different group.
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

<br>

:::{style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; font-size: 1.5em; position: absolute; top: 35px; left: 0px"}
How **STRONG** is the association?
:::

#### Probability of [supporting]{.underline} the death penalty

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```


::: {.fragment fragment-index=1 style="font-size: 1.1em; position: absolute; top: 25px; right: 125px"}
For [black]{style="color: #754cbc"} respondents: <br>
[$P(SUPPORT) = 0.5769$]{style="color: #754cbc"}
:::

::: {.fragment fragment-index=1 style="font-size: 1.1em; position: absolute; top: 100px; right: 125px"}
For [white]{style="color: #a68100"} respondents: <br>
[$P(SUPPORT) = 0.8310$]{style="color: #a68100"}
:::

::: {.fragment fragment-index=2 style="font-size: 1.25em;"}
RISK RATIO = [$(0.8310)$]{style="color: #a68100"} $/$ [$(0.5769)$]{style="color: #754cbc"} $= 1.44$
:::

::: {.fragment fragment-index=3}
*The probability of supporting the death penalty is 1.44 times greater for white than for black respondents*
:::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}

:::: {.columns}

::: {.column width="50%"}

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?

* **Maximum (perfect) association:**
    * All cases with a particular value of X have the same value on Y (no conditional variation)
    * Knowing the value of X allows for perfect prediction of Y
* **Minimum (no) association:**
    * High conditional variation (value of Y varies even among those cases with the same value of X)
    * Knowing the value of X does not improve ability to predict Y

:::


:::
  
::: {.column width="50%"}
::: {.fragment style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center"}
[**DIRECTION**]{.underline style="color: #690c48"} <br>
Is the association positive or negative?

* **Positive association**: High values on Y tend to coincide with high values on X
* **Negative association**: High values on Y tend to coincide with low values on X
:::
:::
  
::::

---

### Using conditional distributions to detect an [association]{style="color: #e93cac"}

:::: {.columns}

::: {.column width="80%"}

<br>

```{r}
#| echo: false

crimes_educ |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table: Number of Crimes Committed by Education", subtitle = "Sample of parolees from Florida Prisons") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_label( low = "Low Education", high = "High Education") |> 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

:::
  
::: {.column width="20%"}
  
::: {.fragment fragment-index=2 style="font-size:1.25em; background: #e93cac; border: 4px solid #690c48; border-radius: 15px; width: 250px; padding: 5px 5px 5px 5px; position: absolute; top: 275px; right: -75px; text-align: center"}
**Negative**:<br> [Higher]{.underline} education associated with lower number of crimes
:::
  
:::
  
:::: 

<br>

::: {.fragment fragment-index=1 style="border: 3px solid #e93cac; width: 175px; height: 370px; margin: 10px; position: absolute; top: 202px; right: 435px"}
:::

::: {style="font-size:1.25em; text-align: center"}
What is the direction of this association? 
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

What is the [direction]{style="color: #e93cac"} of this association?

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

<br>

::: {.fragment fragment-index=1 style="text-align: center"}
Not relevant since these are nominal variables (no *higher* or *lower* values)
:::

---

### Key characteristics of an association [(e.g. between X and Y)]{style="font-size: 0.9em"}

:::: {.columns}

::: {.column width="50%"}

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center;"}
[**STRENGTH**]{.underline style="color: #115450"} <br>
How strong is the tendency for certain values of Y to go with particular values of X?

* **Maximum (perfect) association:**
    * All cases with a particular value of X have the same value on Y (no conditional variation)
    * Knowing the value of X allows for perfect prediction of Y
* **Minimum (no) association:**
    * High conditional variation (value of Y varies even among those cases with the same value of X)
    * Knowing the value of X does not improve ability to predict Y

:::


:::
  
::: {.column width="50%"}
::: {style="background: #e93cac; border: 4px solid #690c48; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center"}
[**DIRECTION**]{.underline style="color: #690c48"} <br>
Is the association positive or negative?

* **Positive association**: High values on Y tend to coincide with high values on X
* **Negative association**: High values on Y tend to coincide with low values on X
:::

::: {.fragment style="background: #aadb1e; border: 4px solid #6e8e13; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; position: absolute; bottom: -15px"}
[**STATISTICAL SIGNIFICANCE**]{.underline style="color: #44580c"} <br>
How certain can we be that the association exists in the population?

* Relevant when drawing [**inferences**]{.underline} from an association observed in a sample to a possible association in the population
* Determined by a statistical hypothesis test
:::

:::
  
::::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

::: {.fragment fragment-index=1}
There is an association in [this sample]{.underline style="color: #e93cac"}
:::

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

<br>

::: {.fragment fragment-index=2 style="text-align: center"}
**Key question**: Is this association in the sample strong enough to convince us that there is a real association in the POPULATION from which the sample was drawn?
:::


## Chi-square test

::: {.incremental style="font-size: 1.08em"}
* Used to test statistical significance of associations in a two-way table (so, between categorical variables)

* Intended to test whether a pattern or association observed in a set of sample data:
    1) represents a [real association in the population]{style="color: #e93cac"} from which the sample was drawn
   <br>[OR]{style="text-align: center"}<br>
    2) reflects [random sampling error]{style="color: #e93cac"} when, in reality, there is no real association in the population

* Based on a comparison of our observed frequencies to expected frequencies.
    * [Observed frequencies]{style="color: #e93cac"} = the relative frequencies actually observed in the data for the sample
    * [Expected frequencies]{style="color: #e93cac"} = the relative frequencies that we would expect if there was no association in the data

:::


---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

[What would the table look like if there were no association between the variables?]{.fragment fragment-index=1}

<br>

```{r}
#| echo: false

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Two-way table of attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="text-align: center; font-size: 0.95em"}
Chi-square test is based on comparison of the counts/frequencies we actually observe in the sample to what the table would look like if there were no association between the variables
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

What would the table look like if there were no association between the variables?

[Conditional distributions of the DV would match across the values of the IV (same as marginals)]{style="color: #e93cac; font-size: 0.95em"}

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("  <br> (80.16%)", "  <br> (19.84%)",  "104 <br> (100.00%)"), White = c("  <br> (80.16%)", "   <br> (19.84%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "897"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "EXPECTED FREQUENCIES for attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="text-align: center; font-size: 0.95em"}
Chi-square test is based on comparison of the counts/frequencies we actually observe in the sample to what the table would look like if there were no association between the variables
:::

::: {style="border: 3px solid #e93cac; width: 700px; height: 30px; margin: 10px; position: absolute; top: 347px; left: 310px"}

:::

::: {style="border: 3px solid #e93cac; width: 700px; height: 30px; margin: 10px; position: absolute; top: 427px; left: 310px"}

:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

What would the table look like if there were no association between the variables?

[Conditional distributions of the DV would match across the values of the IV (same as marginals)]{style="color: #e93cac; font-size: 0.95em"}

```{r}
#| echo: false

death_penalty_race <- data.frame(Black = c("83.36 <br> (80.16%)", "20.64 <br> (19.84%)",  "104 <br> (100.00%)"), White = c("635.64 <br> (80.16%)", "157.36 <br> (19.84%)", "793 <br> (100.00%)"), TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "897"))
rownames(death_penalty_race) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_race |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "EXPECTED FREQUENCIES for attitudes towards the death penalty by race", subtitle = "Black and White respondents in GSS 2000") |> # add title and subtitle
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  #opt_stylize(style = 2, color = "blue", add_row_striping = TRUE) |> # stylize so visible with background color (code below was excruciating attempt to color all table lines darker but I couldn't figure out how to change all lines)
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="text-align: center; font-size: 0.95em"}
Chi-square test is based on comparison of the counts/frequencies we actually observe in the sample to what the table would look like if there were no association between the variables
:::

::: {style="border: 3px solid #e93cac; width: 400px; height: 30px; margin: 10px; position: absolute; top: 315px; left: 310px"}

:::

::: {style="border: 3px solid #e93cac; width: 400px; height: 30px; margin: 10px; position: absolute; top: 395px; left: 310px"}

:::

::: {style="border: 3px solid #e93cac; width: 375px; height: 35px; margin: 10px; position: absolute; top: 185px; left: 10px"}

:::

## Calculation of chi-square

::: fragment
* Obtained value of chi-square:

[$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$]{style="font-size: 1.5em"}
where\
$f_o =$ [$observed$]{style="color: #e93cac"} $\text{frequency in a given}$ [cell]{.underline}\
$f_e =$ $\text{frequency in the}$ [cell]{.underline} [expected]{style="color: #e93cac"} $\text{under the assumption of the null hypothesis}$  
&emsp;&ensp; $\text{(no association in the population)}$\
:::

::: fragment
* Shortcut to calculate expected cell frequencies: 

[$$
f_e = \frac{\text{(row marginal)(column marginal)}}{n}
$$]{style="font-size: 1.5em"}
:::

::: {.fragment style="background: #e93cac; border: 3px solid #690c48; border-radius: 15px; width: 350px; padding: 5px 5px 5px 5px; position: absolute; top: 150px; right: -50px; text-align: center"}
Note: Chi-square will take a value of 0 if there is no association in the sample. 
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

```{r}
#| echo: false

death_penalty_chi <- data.frame(Black = c("$f_0 = 60$ <br> $f_e = 83.36$ <br> (57.69%)", 
                                          "$f_0 = 44$ <br> $f_e = 20.64$ <br> (42.31%)",  
                                          "104 <br> (100.00%)"), 
                                White = c("$f_0 = 659$ <br> $f_e = 635.64$ <br> (83.10%)", 
                                          "$f_0 = 134$ <br> $f_e = 157.36$ <br> (16.90%)", 
                                          "793 <br> (100.00%)"), 
                                TOTAL = c("719 <br> (80.16%)", "178 <br> (19.84%)", "897"))
rownames(death_penalty_chi) <- c("Support Death Penalty", "Oppose Death Penalty", "TOTAL")

death_penalty_chi |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "OBSERVED and EXPECTED Frequencies") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(60), table.font.size = px(18L)) 
```

<br>

::: {.fragment style="position: absolute; left: 0px"}
|   | $f_0$  | $f_e$ | [$(f_0 - f_e)$]{style="color: #e8e3d3"}   | [$(f_0 - f_e)^2$]{style="color: #e8e3d3"}   | [$\frac{(f_0 - f_e)^2}{f_e}$]{style="color: #e8e3d3"}   |
|:------:|:------:|:---:|:---:|:---:|:---:|
| Cell #1 | 60 | 83.36 |  [-23.36]{style="color: #e8e3d3"}   |   [545.69]{style="color: #e8e3d3"}   |   [6.55]{style="color: #e8e3d3"}   | 
| Cell #2 | 659 | 635.64 |  [23.36]{style="color: #e8e3d3"}   |  [545.69]{style="color: #e8e3d3"}    |  [0.86]{style="color: #e8e3d3"}    | 
| Cell #3 | 44 | 20.64 |  [23.36]{style="color: #e8e3d3"}   |  [545.69]{style="color: #e8e3d3"}    |  [26.44]{style="color: #e8e3d3"}    | 
| Cell #4 | 134 | 157.36 |  [-23.36]{style="color: #e8e3d3"}   |   [545.69]{style="color: #e8e3d3"}   |   [3.47]{style="color: #e8e3d3"}   | 

:  {tbl-colwidths="[15, 15, 15, 15, 15, 25]"}
:::

::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; bottom: 75px; right: -50px; text-align: center"}
$$
\chi^2 = \Sigma\frac{(f_0 - f_e)^2}{f_e}
$$
:::

---

#### [Goal]{style="color: #e93cac"}: Understand the association between race and attitudes about the death penalty

<br>

```{r}
#| echo: false

death_penalty_chi |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "OBSERVED and EXPECTED Frequencies") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(60), table.font.size = px(18L)) 
```

<br>

::: {style="position: absolute; left: 0px"}
|   | $f_0$  | $f_e$ | $(f_0 - f_e)$  | $(f_0 - f_e)^2$  | $\frac{(f_0 - f_e)^2}{f_e}$  |
|:------:|:------:|:---:|:---:|:---:|:---:|
| Cell #1 | 60 | 83.36 |  -23.36  |   545.69  |   6.55  | 
| Cell #2 | 659 | 635.64 |  23.36  |  545.69   |  0.86   | 
| Cell #3 | 44 | 20.64 |  23.36  |  545.69   |  26.44   | 
| Cell #4 | 134 | 157.36 |  -23.36  |   545.69  |   3.47  | 

:  {tbl-colwidths="[15, 15, 15, 15, 15, 25]"}
:::


::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; bottom: 75px; right: -50px; text-align: center"}
$$
\chi^2 = \Sigma\frac{(f_0 - f_e)^2}{f_e}
$$
:::

::: {.fragment fragment-index=1 style="position: absolute; bottom: -25px; right: -50px; font-size: 2em"}
[$\Sigma$]{style="color: #1b8883"}  $= 37.31$
:::

::: {.fragment fragment-index=1 style="border: 3px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; width: 75px; height: 150px; position: absolute; bottom: -16px; right: 287px; text-align: center"}

:::

::: {.fragment fragment-index=2 style="border: 3px solid black; border-radius: 15px; padding: 5px 5px 5px 5px; width: 250px; position: absolute; top: 75px; left: -75px; text-align: center"}
Chi-square score summarizes the difference between what we observe in the sample and what would expect to observe if there was no association between the variables.
:::

::: {.fragment fragment-index=3 style="border: 3px solid #e93cac; border-radius: 15px; padding: 5px 5px 5px 5px; width: 200px; position: absolute; top: 50px; right: -50px; text-align: center"}
Question: Is that difference big enough to convince us that it did not just happen by chance (sampling error)?
:::

::: {.fragment fragment-index=4 style="border: 3px solid #754cbc; border-radius: 15px; padding: 5px 5px 5px 5px; width: 200px; position: absolute; top: 365px; right: -50px; text-align: center"}
Need a hypothesis test
:::

## Hypothesis test for two-way Chi-square

::: incremental
1. Check assumptions
    * Random sample, scores are independent (i.e., each subject is allowed only one preference); no expected cell frequencies below 5. 
2. State the hypotheses
    * Null: No association in the population
    * Alternative: A real association in the population.
3. Identify alpha and the critical value of chi-square
    * Use a [chi-square distribution table](https://math.arizona.edu/~jwatkins/chi-square-table.pdf) to get critical value of chi-square
    * degrees of freedom $(df) = (R-1)(C-1)$
4. Calculate the test statistic
    * chi-square obtained
5. Make a decision
    * Reject or fail to reject null hypothesis
    * Make a statement about the implications for the [population]{.underline}
:::

## Step 1: Check assumptions

<br>

```{r}
#| echo: false

death_penalty_chi |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "OBSERVED and EXPECTED Frequencies") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(60), table.font.size = px(18L)) 
```

<br>

::: incremental
* Random sample ✔️
* Scores are independent ✔️
* No expected cell frequencies below 5 ✔️
:::

## Step 2: State the hypotheses

<br>
<br>

::: {.fragment .center fragment-index=1 style="background: #c5b4e3; border: 4px solid #754cbc; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; width: 300px"}
$H_0$: No association between race and attitudes toward death penalty [in the population]{.underline}
:::

<br>

::: {.fragment .center fragment-index=2 style="background: #aadb1e; border: 4px solid #6e8e13; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; width: 300px"}
$H_a$: A real association between race and attitudes toward death penalty [in the population]{.underline}
:::

---

### [Step 3: Identify alpha and the critical value of chi-square]{style="font-size: 0.95em"}

<br>

The default [alpha level]{style="color: #a68100"} is [$0.05$]{style="color: #a68100"} *($0.01$ and $0.001$ are tougher alternatives)*

<br>

::: fragment
[$df$]{style="color: #1b8883"} $= (R-1)(C-1) = (2-1)(2-1) =$ [$1$]{style="color: #1b8883"}
:::

<br>

::: fragment
Now we can go to the [chi-square distribution table](https://math.arizona.edu/~jwatkins/chi-square-table.pdf) to see what critical value is associated with an [alpha level of 0.05]{style="color: #a68100"} and [1 degree of freedom]{style="color: #1b8883"}
:::

<br>
<br>

::: {.fragment .center style="border: 3px solid black; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; font-size: 1.5em"}
Our critical value is **$3.84$**
:::

---

#### Step 4: Calculate the test statistic

<br>

```{r}
#| echo: false

death_penalty_chi |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "OBSERVED and EXPECTED Frequencies") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(60), table.font.size = px(18L)) 
```

<br>

::: {style="position: absolute; left: 0px"}
|   | $f_0$  | $f_e$ | $(f_0 - f_e)$  | $(f_0 - f_e)^2$  | $\frac{(f_0 - f_e)^2}{f_e}$  |
|:------:|:------:|:---:|:---:|:---:|:---:|
| Cell #1 | 60 | 83.36 |  -23.36  |   545.69  |   6.55  | 
| Cell #2 | 659 | 635.64 |  23.36  |  545.69   |  0.86   | 
| Cell #3 | 44 | 20.64 |  23.36  |  545.69   |  26.44   | 
| Cell #4 | 134 | 157.36 |  -23.36  |   545.69  |   3.47  | 

:  {tbl-colwidths="[15, 15, 15, 15, 15, 25]"}
:::


::: {style="background: #2ad2c9; border: 4px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; bottom: 75px; right: -50px; text-align: center"}
$$
\chi^2 = \Sigma\frac{(f_0 - f_e)^2}{f_e}
$$
:::

::: {style="position: absolute; bottom: -25px; right: -50px; font-size: 2em"}
[$\Sigma$]{style="color: #1b8883"}  $= 37.31$
:::

::: {style="border: 3px solid #1b8883; border-radius: 15px; padding: 5px 5px 5px 5px; width: 75px; height: 150px; position: absolute; bottom: -16px; right: 287px; text-align: center"}

:::

## Step 5: Make a decision

<br> 
<br>

::: {.fragment .center style="border: 4px solid #754cbc; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; width: 450px"}
Since the obtained chi-square ($37.31$) is greater than the critical value ($3.84$), I can [reject the null hypothesis]{.underline style="color: #754cbc"}
:::

<br>

::: {.fragment .center style="border: 4px solid #6e8e13; border-radius: 15px; padding: 5px 5px 5px 5px; text-align: center; width: 450px"}
This [supports the research hypothesis]{style="color: #6e8e13"} that there **IS** a real association between race and attitudes toward the death penalty [**IN THE POPULATION**]{.underline}
:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

<br>

::: fragment
In this sample, is there an [**association**]{style="color: #e93cac"} between diet and feelings towards Thanksgiving?  How do you know?
:::

:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br>   <br>", 
                                          "36 <br>   <br>   <br>",
                                          "",
                                          "100"), 
                                Carnivore = c("   <br>   <br>   <br>", 
                                          "   <br>   <br>   <br>", 
                                          "   <br>   <br>   <br>", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
   
```

:::

::::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

<br>


In this sample, is there an [**association**]{style="color: #e93cac"} between diet and feelings towards Thanksgiving?  How do you know?


:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br>   <br>", 
                                          "36 <br>   <br>   <br>",
                                          "39 <br>   <br>   <br>",
                                          "100"), 
                                Carnivore = c("55 <br>   <br>   <br>", 
                                          "75  <br>    <br>    <br>", 
                                          "145  <br>    <br>    <br>", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="font-size: 1.25em; text-align: center; position: absolute; bottom: 0px; right: 75px"}
Fill in the missing observed frequencies
:::


:::

::::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

<br>


In this sample, is there an [**association**]{style="color: #e93cac"} between diet and feelings towards Thanksgiving?  How do you know?


:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br> (25.00%)", 
                                          "36 <br>   <br> (36.00%)",
                                          "39 <br>   <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br>   <br> (20.00%)", 
                                          "75  <br>    <br> (27.27%)", 
                                          "145  <br>    <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="font-size: 1.25em; text-align: center; position: absolute; bottom: 0px"}
Add column percentages to better understand conditional distributions
:::

:::

::::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

<br>


In this sample, is there an [**association**]{style="color: #e93cac"} between diet and feelings towards Thanksgiving?  How do you know?


:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br> (25.00%)", 
                                          "36 <br>   <br> (36.00%)",
                                          "39 <br>   <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br>   <br> (20.00%)", 
                                          "75  <br>    <br> (27.27%)", 
                                          "145  <br>    <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="font-size: 1.25em; text-align: center; position: absolute; bottom: 0px"}
Difference in [conditional distributions]{.underline style="color: #e93cac"} indicate that there IS an association in the sample
:::

:::

::::

::: {style="border: 3px solid #e93cac; width: 350px; height: 35px; margin: 10px; position: absolute; top: 240px; right: 175px"}

:::

::: {style="border: 3px solid #e93cac; width: 350px; height: 35px; margin: 10px; position: absolute; top: 355px; right: 175px"}

:::

::: {style="border: 3px solid #e93cac; width: 350px; height: 35px; margin: 10px; position: absolute; top: 470px; right: 175px"}

:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

<br>


In this sample, is there an [**association**]{style="color: #e93cac"} between diet and feelings towards Thanksgiving?  How do you know?

::: {style="font-size: 1.5em; text-align: center; position: absolute; bottom: 25px; left: 50px"}
$\frac{0.53}{0.39} = 1.$[$36$]{style="color: #e93cac"}
:::

:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br> (25.00%)", 
                                          "36 <br>   <br> (36.00%)",
                                          "39 <br>   <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br>   <br> (20.00%)", 
                                          "75  <br>    <br> (27.27%)", 
                                          "145  <br>    <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

::: {style="font-size: 1em; text-align: center; position: absolute; bottom: -25px"}
Use risk ratios to quantify the association. For example, the *probability of liking* Thanksgiving is [36% higher for carnivores than for vegetarians]{style="color: #e93cac"}
:::

:::

::::


::: {style="border: 3px solid #e93cac; width: 350px; height: 35px; margin: 10px; position: absolute; top: 470px; right: 175px"}

:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

::: {style="color: #1b8883; text-align: center;"}
Is this association statistically significant? 
:::

::: {style="font-size: 1.5em; text-align: center; color: #1b8883;"}
$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$
:::

:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br>   <br> (25.00%)", 
                                          "36 <br>   <br> (36.00%)",
                                          "39 <br>   <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br>   <br> (20.00%)", 
                                          "75  <br>    <br> (27.27%)", 
                                          "145  <br>    <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

:::

::::

::: {.fragment fragment-index=1 style="font-size: 0.96em; text-align: center; border: 3px solid #6e8e13; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; left: -70px; bottom: 0px"}
$H_a$: IN THE POPULATION, there is an association<br>between diet and attitudes towards Thanksgiving.
:::

::: {.fragment fragment-index=1 style="font-size: 0.96em; text-align: center; border: 3px solid #754cbc; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; right: -70px; bottom: 0px"}
$H_0$: There is no association between diet and<br>attitudes towards Thanksgiving IN THE POPULATION.
:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

::: {style="color: #1b8883; text-align: center;"}
Is this association statistically significant? 
:::

::: {style="font-size: 1.5em; text-align: center; color: #1b8883;"}
$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$
:::

:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br> $f_e = 21.33$ <br> (25.00%)", 
                                          "36 <br> $f_e = 29.60$ <br> (36.00%)",
                                          "39 <br> $f_e = 49.07$ <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br> $f_e = 58.67$ <br> (20.00%)", 
                                          "75  <br> $f_e = 81.40$ <br> (27.27%)", 
                                          "145  <br> $f_e = 134.93$ <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

:::

::::

::: {style="font-size: 0.96em; text-align: center; position: absolute; left: -70px; bottom: 60px"}
Find EXPECTED FREQUENCIES:
:::

::: {style="font-size: 1.25em; text-align: center; position: absolute; left: -70px; bottom: -15px"}
$f_e = \frac{\text{(row marginal)(column marginal)}}{n}$
:::

::: {.fragment fragment-index=1 style="font-size: 1.25em; text-align: center; position: absolute; left: 380px; bottom: 25px"}
For example: $f_e$ for [Cell 5]{style="color: #e93cac"} = $\frac{(184)(100)}{375} =$ [$49.07$]{style="color: #e93cac"}
:::

::: {.fragment fragment-index=1 style="border: 3px solid #e93cac; width: 150px; height: 100px; margin: 10px; position: absolute; bottom: 169px; left: 510px"}

:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

::: {style="color: #1b8883; text-align: center;"}
Is this association statistically significant? 
:::

::: {style="font-size: 1.5em; text-align: center; color: #1b8883;"}
$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$
:::

:::

::: {.column width="70%"}
```{r}
#| echo: false

thanksgiving <- data.frame(Vegetarian = c("25 <br> $f_e = 21.33$ <br> (25.00%)", 
                                          "36 <br> $f_e = 29.60$ <br> (36.00%)",
                                          "39 <br> $f_e = 49.07$ <br> (39.00%)",
                                          "100"), 
                                Carnivore = c("55 <br> $f_e = 58.67$ <br> (20.00%)", 
                                          "75  <br> $f_e = 81.40$ <br> (27.27%)", 
                                          "145  <br> $f_e = 134.93$ <br> (52.73%)", 
                                          "275"), 
                                TOTAL = c("80", "111", "184", "375"))
rownames(thanksgiving) <- c("Dislikes", "Indifferrent", "Likes", "TOTAL")

thanksgiving |> 
  gt(rownames_to_stub = T) |> # add rownames to column
  tab_header(title = "Feelings about Thanksgiving") |> # add title
  fmt_markdown(columns = everything()) |> # include html 
  cols_align(align = "center", columns = everything()) |> # center columns
  tab_options(table.background.color = "#e8e3d3") |> # change background color
  opt_table_outline(color = "#85754d") |> # outline table with colored border 
  tab_options(table.background.color = "#e8e3d3", table_body.hlines.color = "#85754d", table_body.vlines.color = "#85754d", table_body.border.top.color = "#85754d", 
              table_body.border.bottom.color = "#85754d", stub.border.color = "#85754d", heading.border.bottom.color = "#85754d",  column_labels.border.bottom.color = "#85754d", 
              table.width = pct(100), table.font.size = px(25L)) 
```

:::

::::

::: {style="font-size: 1.25em; text-align: center; position: absolute; left: 0px; bottom: 0px"}
[Expected frequencies]{style="color: #e93cac"} reflect how the table would look if there were [no association]{style="color: #e93cac"} between the variables (i.e., if the [null hypothesis were true]{style="color: #e93cac"})
:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

::: {style="color: #1b8883; text-align: center;"}
Is this association statistically significant? 
:::

::: {style="font-size: 1.5em; text-align: center; color: #1b8883;"}
$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$
:::

:::

::: {.column width="70%"}

|   | $f_0$  | $f_e$ | [$(f_0 - f_e)$]{style="color: #e8e3d3"}  | [$(f_0 - f_e)^2$]{style="color: #e8e3d3"}  | [$\frac{(f_0 - f_e)^2}{f_e}$]{style="color: #e8e3d3"}  |
|:------:|:------:|:---:|:---:|:---:|:---:|
| Cell 1 | 25 | 21.33 |  [3.67]{style="color: #e8e3d3"}  |   [13.44]{style="color: #e8e3d3"}  |   [0.63]{style="color: #e8e3d3"}  | 
| Cell 2 | 55 | 58.67 |  [-3.67]{style="color: #e8e3d3"}  |  [13.44]{style="color: #e8e3d3"}   |  [0.23]{style="color: #e8e3d3"}   | 
| Cell 3 | 36 | 29.60 |  [6.40]{style="color: #e8e3d3"}  |  [40.96]{style="color: #e8e3d3"}   |  [1.38]{style="color: #e8e3d3"}  | 
| Cell 4 | 75 | 81.40 |  [-6.40]{style="color: #e8e3d3"}  |   [40.96]{style="color: #e8e3d3"}  |   [0.50]{style="color: #e8e3d3"}  | 
| Cell 5 | 39 | 49.07 |  [-10.07]{style="color: #e8e3d3"}  |   [101.34]{style="color: #e8e3d3"}  |   [2.07]{style="color: #e8e3d3"}  | 
| Cell 6 | 145 | 134.93 |  [10.07]{style="color: #e8e3d3"}  |   [101.34]{style="color: #e8e3d3"}  |   [0.75]{style="color: #e8e3d3"}  | 
|  |  |  |   |   |  |

:  {tbl-colwidths="[15, 15, 15, 15, 15, 25]"}

:::

::::

::: {style="font-size: 1.25em; text-align: center; position: absolute; left: 0px; bottom: 0px"}
[Expected frequencies]{style="color: #e93cac"} reflect how the table would look if there were [no association]{style="color: #e93cac"} between the variables (i.e., if the [null hypothesis were true]{style="color: #e93cac"})
:::

## Another example 

:::: {.columns}

::: {.column width="30%"}

*You collect data from a random sample of 375 individuals to look at whether feelings toward Thanksgiving differ by dietary preferences.  The partial data are in the table to the right.*

::: {style="color: #1b8883; text-align: center;"}
Is this association statistically significant? 
:::

::: {style="font-size: 1.5em; text-align: center; color: #1b8883;"}
$$
\chi^2 = \Sigma\frac{(f_o - f_e)^2}{f_e}
$$
:::

:::

::: {.column width="70%"}

|   | $f_0$  | $f_e$ | $(f_0 - f_e)$  | $(f_0 - f_e)^2$  | $\frac{(f_0 - f_e)^2}{f_e}$  |
|:------:|:------:|:---:|:---:|:---:|:---:|
| Cell 1 | 25 | 21.33 |  3.67  |   13.44  |   0.63  | 
| Cell 2 | 55 | 58.67 |  -3.67  |  13.44   |  0.23   | 
| Cell 3 | 36 | 29.60 |  6.40  |  40.96   |  1.38   | 
| Cell 4 | 75 | 81.40 |  -6.40  |   40.96  |   0.50  | 
| Cell 5 | 39 | 49.07 |  -10.07  |   101.34  |   2.07  | 
| Cell 6 | 145 | 134.93 |  10.07  |   101.34  |   0.75  | 
|  |  |  |   | [**$\chi^2 =$**]{style="color: #1b8883"} | [**5.56**]{style="color: #1b8883"} |

:  {tbl-colwidths="[15, 15, 15, 15, 15, 25]"}

::: fragment
* Need to compare our obtained $\chi^2$ value of 5.56 with the critical value of $\chi^2$ 
:::

:::

::::

::: {style="font-size: 1.25em; text-align: center; position: absolute; left: 0px; bottom: 0px"}
[Expected frequencies]{style="color: #e93cac"} reflect how the table would look if there were [no association]{style="color: #e93cac"} between the variables (i.e., if the [null hypothesis were true]{style="color: #e93cac"})
:::


## Chi-square and strength of an association

# Break! {.section-title background-color="#2ad2c9"}

# Scatterplots and correlation {.section-title background-color="#c5b4e3"}

## Correlation 

## Scatterplots

## Correlation and regression

## Correlation coefficient

1. Why it's cool
2. Why you need to be careful
3. Interpretation

## Practice

## Scatterplot visuals

## Making a scatterplot

## Calculating correlation coefficient

## Hypothesis test for correlation

1. Check assumptions
2. State the hypothesis
3. Identify alpha and the critical value of r
4. Calculate the test statistic
5. Make a decision

## Examples 

# Homework{.section-title background-color="#e8e3d3"}

## {data-menu-title="Homework 8" background-iframe="https://vsass.github.io/SOC221/homework/homework8.html" background-interactive=TRUE}